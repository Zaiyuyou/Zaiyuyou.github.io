---
title: 文件
date: 2024-07-21
tags:
  - 开发技巧
  - 笔记
  - C
categories:
  - 编程
---

# 文件指针

文件指针就是用于标识一个文件的，程序中所有对文件的操作都需要通过文件指针执行。


## 文件指针的一般形式

FILE* 指针变量标识符；

FILE为大写，需要引用<stdio.h>

FILE是系统使用typedef定义出来的有关文件信息的一种结构体类型，结构中含有文件名、文件状态和文件当前位置等信息

一般情况下，我们操作文件前必须定义一个文件指针标示我们将要操作的文件

实际编程中使用库函数操作文件，无需关心FILE结构体的细节，只需要将文件指针传给io库函数，库函数再通过FILE结构体里的信息对文件进行操作。

FILE 结构体的定义：

```c
typedef struct
{
    short level;            //缓冲区“满”或“空”的程度
    unsigned flags;         //文件状态标志
    char fd;                //文件描述符
    unsigned char hold;     //如无缓冲区不读取字符
    short bsize;            //缓冲区的大小 
    unsigned char *buffer;  //数据缓冲区的位置
    unsigned ar;            //文件位置指示器
    unsigned char *curp;    //文件位置指示器
    unsigned istemp;        //临时文件指示器
    short token;            //用于有效性检查
} FILE;
``` 

**对文件操作的步骤：**

1. 对文件进行读写等操作之前要打开文件得到文件指针
2. 可以通过文件指针对文件进行读写等操作
3. 读写等操作完毕后，要关闭文件，关闭文件后，就不能再通过此文件指针操作文件了
